<!DOCTYPE html>
  <head>
      <title>Onebridge D3 V5 2020 - Bootstrap - Node - Webpack - Starter - Template</title>
      <meta charset="utf-8">
      <meta name="google-signin-client_id" content="asdfasfc5vu5ob22ovoijudvnksu7l8f9.apps.googleusercontent.com">
      <script src="https://apis.google.com/js/platform.js" async defer></script>
  </head>

  <body>

  <div id="gglSgnInBtn" class="g-signin2" data-onsuccess="onSignIn"></div>

  <div id="authenticated">
      <nav class="navbar  navbar-expand-lg navbar-light bg-light" style="margin-bottom: 1em;">
        <a class="navbar-brand" href="#">
        <img src="https://uploads-ssl.webflow.com/5c19020c997c25514d17d86f/5c20466035af3abf77d5e8bd_logo.svg" width="200" height="50">
        </a>

        <div class="collapse navbar-collapse w-100 order-3 dual-collapse2">
          <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                  <button class="btn btn-outline-success my-2 my-sm-0" id="resourceNavBtn" data-toggle="modal" data-target="#resources-dialog">D3 resources</button>
              </li>
            </ul>
        </div>
    </nav>

    <div id="resources-dialog" class="modal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            
            <div class="modal-header">
              <h5 class="modal-title">Resources</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span>
              </button>
            </div>
            
            <div class="modal-body">
              <table class="table table-condensed">
              
              <tbody>
                <tr>
                  <td><a href="https://bl.ocks.org/mbostock" target="_blank">Blocks</a></td>
                </tr>
                <tr>
                  <td><a href="https://flowingdata.com/2019/06/18/getting-started-with-d3/" target="_blank">Flowing Data</a></td>
                <tr>
                  <td><a href="https://stackoverflow.com/tags/d3.js/" target="_blank">Stack Overflow</a></td>
                </tr>
              </tbody>
              
              </table>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
          
          </div>
        </div>
    </div>

   
    <div class="row">
      
      <p id="email" class="alert alert-danger"></p>
    </div>

    <div class="row">
      <div id="canvas" class="container">
       
      </div>
    
    </div>

    <a href="#" onclick="signOut();">Sign out</a>
  </div>  

  <div id="not-authorized">
    <p class="alert alert-danger">You are not authorized to view this page</p>
    <a href="#" onclick="signOut();">Sign out</a>
  </div>

  </body>

    <script>
    function onSignIn(googleUser) {
      // Useful data for your client-side scripts:
      var profile = googleUser.getBasicProfile();
      console.log("ID: " + profile.getId()); // Don't send this directly to your server!
      console.log('Full Name: ' + profile.getName());
      console.log('Given Name: ' + profile.getGivenName());
      console.log('Family Name: ' + profile.getFamilyName());
      console.log("Image URL: " + profile.getImageUrl());
      console.log("Email: " + profile.getEmail());

      
      document.getElementById("email").innerText = profile.getEmail();

      if(profile.getEmail() === "nikhidas@gmail.com") {
        document.getElementById("authenticated").style.display = "block";
        document.getElementById("gglSgnInBtn").style.display = "none";
      } else {
        document.getElementById("authenticated").style.display = "none";
        document.getElementById("gglSgnInBtn").style.display = "none";
        document.getElementById("not-authorized").style.display = "block";
      }
     
    }

    function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
      document.getElementById("authenticated").style.display = "none";
        document.getElementById("gglSgnInBtn").style.display = "block";
        document.getElementById("not-authorized").style.display = "none";
    });
    }
  </script>


</html>
